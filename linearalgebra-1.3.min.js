function Point(t,i){t instanceof Point?(this.x=t.x,this.y=t.y):"number"==typeof t.top&&"number"==typeof t.left?(this.x=t.left,this.y=t.top):(this.x=t,this.y=i)}function Box(t,i,n,e){var r;t instanceof Box?(this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2):t instanceof Point&&i instanceof Point?(this.x1=t.x,this.y1=t.y,this.x2=i.x,this.y2=i.y):(this.x1=t,this.y1=i,this.x2=n,this.y2=e),this.x1>this.x2&&(r=this.x1,this.x1=this.x2,this.x2=r),this.y1>this.y2&&(r=this.y1,this.y1=this.y2,this.y2=r),this.p1=new Point(this.x1,this.y2),this.p2=new Point(this.x2,this.y2),this.left=this.x1,this.top=this.y1,this.right=this.x2,this.bottom=this.y2,this.width=this.x2-this.x1,this.height=this.y2-this.y1,this.topleft=this.p1,this.lefttop=this.topleft,this.topright=new Point(this.right,this.top),this.righttop=this.topright,this.bottomleft=new Point(this.left,this.bottom),this.leftbottom=this.bottomleft,this.bottomright=this.p2,this.rightbottom=this.bottomright}function Vector(t,i){t instanceof Vector?(this.o=new Point(t.o),this.t=new Point(t.t)):t instanceof Point?(i||(i=t,t=new Point(0,0)),this.o=t,this.t=i):"number"==typeof t&&(this.o=Point.ORIGIN,this.t=new Point(t,i)),this.dx=this.t.x-this.o.x,this.dy=this.t.y-this.o.y}function Line(t,i,n){t instanceof Line?(this.o=new Point(t.o),this.dx=t.dx,this.dy=t.dy):(this.o=t,i instanceof Vector?(this.dx=i.dx,this.dy=i.dy):i instanceof Point?(n||(n=i,i=t),this.dx=i.x-n.x,this.dy=i.y-n.y):(this.dx=i,this.dy=n)),this.t=new Point(this.o.x+this.dx,this.o.y+this.dy),this.v=new Vector(this.o,this.t)}function Matrix(t){this.data=t instanceof Matrix?t.data:t,this.h=this.data.length,this.w=this.data[0].length}function Triangle(t,i,n){var e=t.x-i.x,o=t.x-n.x,s=i.x-n.x,r=t.y-i.y,a=t.y-n.y,h=i.y-n.y;this.a=t,this.b=i,this.c=n,this.lena=Math.sqrt(s*s+h*h),this.lenb=Math.sqrt(o*o+a*a),this.lenc=Math.sqrt(e*e+r*r),this.rada=Math.acos((this.lenb*this.lenb+this.lenc*this.lenc-this.lena*this.lena)/(2*this.lenb*this.lenc)),this.radb=Math.acos((this.lena*this.lena+this.lenc*this.lenc-this.lenb*this.lenb)/(2*this.lena*this.lenc)),this.radc=Math.PI-(this.rada+this.radb),this.dega=this.rada*(180/Math.PI),this.degb=this.radb*(180/Math.PI),this.degc=this.radc*(180/Math.PI)}Point.ORIGIN=new Point(0,0),Point.prototype.midpoint=function(t){return new Point((this.x+t.x)/2,(this.y+t.y)/2)},Point.prototype.add=function(t){return new Point(this.x+t.dx,this.y+t.dy)},Point.prototype.subtract=function(t){return new Point(this.x-t.dx,this.y-t.dy)},Point.prototype.inside=function(t){return this.x>=t.left&&this.x<t.right&&this.y>=t.top&&this.y<t.bottom},Point.prototype.toString=function(){return"["+this.x+", "+this.y+"]"},Point.serialize=function(t){if(t instanceof Point)return[t.x,t.y];for(var i=[],n=0;n<t.length;n++)i.push(t[n].x),i.push(t[n].y);return i},Point.deserialize=function(t){for(var i=[],n=0;n<t.length;n+=2)i.push(new Point(t[n],t[n+1]));return i},Point.boundingbox=function(t){for(var i=1==arguments.length?t:arguments,n=i[0].x,e=i[0].y,o=i[0].x,s=i[0].y,r=1;r<i.length;r++)n=Math.min(i[r].x,n),e=Math.min(i[r].y,e),o=Math.max(i[r].x,o),s=Math.max(i[r].y,s);return new Box(n,e,o,s)},Box.prototype.toString=function(){return"{left:"+this.left+", top:"+this.top+", right:"+this.right+", bottom:"+this.bottom+"}"},Vector.prototype.add=function(t){return new Vector(this.dx+t.dx,this.dy+t.dy)},Vector.prototype.sub=function(t){return new Vector(this.dx-t.dx,this.dy-t.dy)},Vector.prototype.mul=function(t){return new Vector(this.dx*t,this.dy*t)},Vector.prototype.div=function(t){return new Vector(this.dx/t,this.dy/t)},Vector.prototype.dot=function(t){return this.dx*t.dx+this.dy*t.dy},Vector.prototype.mag=function(t){var i=Math.sqrt(this.dx*this.dx+this.dy*this.dy);if("undefined"!=typeof t){var n=this.dx*(t/i),e=this.dy*(t/i);return new Vector(n,e)}return i},Vector.prototype.magsq=function(){return this.dx*this.dx+this.dy*this.dy},Vector.prototype.rotate=function(t){t+=Math.PI;var i=this.angle(),n=this.o.x-this.mag()*Math.cos(i-t),e=this.o.y-this.mag()*Math.sin(i-t);return new Vector(new Point(this.o),new Point(n,e))},Vector.prototype.angle=function(){return Math.atan2(this.dy,this.dx)},Vector.prototype.angleFrom=function(t){var i=this.angle()-t.angle();return i>Math.PI&&(i=-2*Math.PI+i),i<-Math.PI&&(i=2*Math.PI+i),i},Vector.prototype.terminus=function(){return new Point(this.dx,this.dy)},Vector.prototype.toPoint=function(){return new Point(this.dx,this.dy)},Vector.prototype.toString=function(){return"["+this.dx+", "+this.dy+"]"},Line.prototype.reflect=function(t){if(t instanceof Point){var i=new Vector(this.o,t),n=new Vector(t),e=this.v.mul(this.v.dot(i)/this.v.magsq()),o=e.sub(i).mul(2),s=n.add(o);return s.terminus()}if(t instanceof Vector){var r=this.reflect(t.o),a=this.reflect(t.t);return new Vector(r,a)}},Line.prototype.rotate=function(t){return new Line(new Point(this.o),this.v.rotate(t))},Line.prototype.angle=function(){return Math.atan2(this.dy,this.dx)},Line.prototype.intersect=function(t){if(0===this.dx){if(0===t.dx)throw"No intersection";return new Point(this.o.x,t.dy/t.dx*(this.o.x-t.o.x)+t.o.y)}if(0===t.dx)return new Point(t.o.x,this.dy/this.dx*(t.o.x-this.o.x)+this.o.y);var i=this.dy/this.dx,n=t.dy/t.dx;if(i==n)throw"No intersection";var e=this.o.y-i*this.o.x,o=t.o.y-n*t.o.x,s=(o-e)/(i-n),r=i*s+e;return new Point(s,r)},Line.prototype.toString=function(){return"o"+this.o+"->["+this.dx+", "+this.dy+"]"},Matrix.prototype.row=function(t){return this.data[t]},Matrix.prototype.col=function(t){for(var i=[],n=0;n<this.data.length;n++)i.push(this.data[n][t]);return i},Matrix.prototype.mul=function(t){var n,e,i=[];if(t instanceof Matrix){var o,s,r,a;for(e=0;e<this.h;e++){for(o=this.row(e),r=[],n=0;n<t.w;n++){a=0,s=t.col(n);for(var h=0;h<this.w;h++)a+=o[h]*s[h];r.push(a)}i.push(r)}return new Matrix(i)}var f;for(e=0;e<this.h;e++){for(f=[],n=0;n<this.w;n++)f.push(t*this.data[e][n]);i.push(f)}return new Matrix(i)},Matrix.prototype.toString=function(){for(var t="{\n",i=0;i<this.data.length;i++)t+=this.data[i].toString()+"\n";return t+="}"};